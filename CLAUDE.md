# CLAUDE.md

This file provides comprehensive guidance to Claude Code (claude.ai/code) when working with the Taiga MCP Server codebase.

## ğŸš€ é¡¹ç›®æ¦‚è¿°

**Taiga MCP Server** æ˜¯ä¸€ä¸ªé«˜åº¦æ¨¡å—åŒ–çš„Model Context ProtocolæœåŠ¡å™¨ï¼Œæä¾›ä¸Taigaé¡¹ç›®ç®¡ç†ç³»ç»Ÿçš„å®Œæ•´è‡ªç„¶è¯­è¨€æ¥å£ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£Node.js ESæ¨¡å—æ¶æ„ï¼Œé€šè¿‡stdioä¼ è¾“ä¸MCPå®¢æˆ·ç«¯é€šä¿¡ï¼Œæ”¯æŒä¼ä¸šçº§é¡¹ç›®ç®¡ç†åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§
- **å®Œæ•´çš„Sprintç®¡ç†** - åˆ›å»ºã€è¿½è¸ªã€ç»Ÿè®¡åˆ†æ
- **é—®é¢˜ç”Ÿå‘½å‘¨æœŸç®¡ç†** - Issueä¸Sprintå…³è”è¿½è¸ª
- **æ¨¡å—åŒ–æ¶æ„** - 13ä¸ªMCPå·¥å…·ï¼Œ6ä¸ªåŠŸèƒ½åˆ†ç±»
- **ä¸“ä¸šæµ‹è¯•æ¡†æ¶** - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€MCPåè®®æµ‹è¯•
- **AIåä½œå¼€å‘** - å±•ç¤ºäººæœºåä½œè½¯ä»¶å¼€å‘æ½œåŠ›

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### å¼€å‘å’Œè¿è¡Œ
```bash
npm start                    # å¯åŠ¨MCPæœåŠ¡å™¨ï¼ˆstdioæ¨¡å¼ï¼‰
npm test                     # è¿è¡Œé»˜è®¤æµ‹è¯•å¥—ä»¶ï¼ˆå•å…ƒ+å¿«é€Ÿæµ‹è¯•ï¼‰
npm run test:unit           # è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆæ— å¤–éƒ¨ä¾èµ–ï¼‰
npm run test:quick          # è¿è¡Œå¿«é€ŸåŠŸèƒ½æµ‹è¯•
npm run test:basic          # è¿è¡ŒMCPåè®®æµ‹è¯•ï¼ˆå¤æ‚ï¼‰
npm run test:integration    # è¿è¡ŒTaiga APIé›†æˆæµ‹è¯•ï¼ˆéœ€å‡­æ®ï¼‰
npm run test:full          # è¿è¡Œæ‰€æœ‰æµ‹è¯•å¥—ä»¶
```

### åŒ…ç®¡ç†ä¸å‘å¸ƒ
```bash
# æ‰‹åŠ¨å‘å¸ƒï¼ˆä¸æ¨èï¼‰
npm publish                 # å‘å¸ƒåˆ°npmï¼ˆéœ€è¦ç‰ˆæœ¬æ›´æ–°ï¼‰

# è‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆæ¨èï¼‰
npm version patch           # åˆ›å»ºæ–°ç‰ˆæœ¬å¹¶è§¦å‘è‡ªåŠ¨å‘å¸ƒ
git push origin main --tags # æ¨é€æ ‡ç­¾ï¼Œè§¦å‘CI/CDè‡ªåŠ¨å‘å¸ƒ

# ä½¿ç”¨å·²å‘å¸ƒçš„åŒ…
npx taiga-mcp-server                     # NPM Registry
npx @greddy7574/taiga-mcp-server        # GitHub Package Registry
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„.envæ–‡ä»¶
```env
TAIGA_API_URL=https://api.taiga.io/api/v1
TAIGA_USERNAME=your_username  
TAIGA_PASSWORD=your_password
```

### Claude Desktopé…ç½®
```json
{
  "mcpServers": {
    "taiga-mcp": {
      "command": "npx",
      "args": ["taiga-mcp-server"],
      "env": {
        "TAIGA_API_URL": "https://api.taiga.io/api/v1",
        "TAIGA_USERNAME": "your_username", 
        "TAIGA_PASSWORD": "your_password"
      }
    }
  }
}
```

## ğŸ—ï¸ æ¶æ„ç»“æ„

### æ¨¡å—åŒ–è®¾è®¡ (v1.5.0+)
```
src/
â”œâ”€â”€ index.js              # MCPæœåŠ¡å™¨ä¸»å…¥å£ï¼ˆ130è¡Œï¼‰
â”œâ”€â”€ constants.js          # ç»Ÿä¸€å¸¸é‡ç®¡ç†ï¼ˆ76è¡Œï¼‰
â”œâ”€â”€ utils.js             # å·¥å…·å‡½æ•°åº“ï¼ˆ120è¡Œï¼‰
â”œâ”€â”€ taigaAuth.js         # è®¤è¯ç®¡ç†
â”œâ”€â”€ taigaService.js      # APIæœåŠ¡å±‚ï¼ˆ420è¡Œï¼‰
â””â”€â”€ tools/               # MCPå·¥å…·æ¨¡å—
    â”œâ”€â”€ index.js         # å·¥å…·æ³¨å†Œä¸­å¿ƒ
    â”œâ”€â”€ authTools.js     # è®¤è¯å·¥å…·
    â”œâ”€â”€ projectTools.js  # é¡¹ç›®ç®¡ç†å·¥å…·
    â”œâ”€â”€ sprintTools.js   # Sprintç®¡ç†å·¥å…·
    â”œâ”€â”€ issueTools.js    # é—®é¢˜ç®¡ç†å·¥å…·
    â”œâ”€â”€ userStoryTools.js # ç”¨æˆ·æ•…äº‹å·¥å…·
    â””â”€â”€ taskTools.js     # ä»»åŠ¡ç®¡ç†å·¥å…·
```

### MCPå·¥å…·åˆ†ç±»ï¼ˆ13ä¸ªå·¥å…·ï¼‰

#### ğŸ” è®¤è¯å·¥å…· (1ä¸ª)
- `authenticate` - Taigaç”¨æˆ·è®¤è¯

#### ğŸ“ é¡¹ç›®ç®¡ç† (2ä¸ª)
- `listProjects` - åˆ—å‡ºç”¨æˆ·é¡¹ç›®
- `getProject` - è·å–é¡¹ç›®è¯¦æƒ…ï¼ˆæ”¯æŒIDå’Œslugï¼‰

#### ğŸƒ Sprintç®¡ç† (4ä¸ª)
- `listMilestones` - åˆ—å‡ºé¡¹ç›®Sprintï¼ˆé‡Œç¨‹ç¢‘ï¼‰
- `getMilestoneStats` - Sprintç»Ÿè®¡ä¿¡æ¯ï¼ˆè¿›åº¦ã€å®Œæˆç‡ï¼‰
- `createMilestone` - åˆ›å»ºæ–°Sprint
- `getIssuesByMilestone` - è·å–Sprintä¸­çš„æ‰€æœ‰é—®é¢˜

#### ğŸ› é—®é¢˜ç®¡ç† (2ä¸ª)
- `listIssues` - åˆ—å‡ºé¡¹ç›®é—®é¢˜ï¼ˆå«Sprintä¿¡æ¯ï¼‰
- `getIssue` - é—®é¢˜è¯¦æƒ…ï¼ˆåŒ…æ‹¬Sprintåˆ†é…ï¼‰
- `createIssue` - åˆ›å»ºé—®é¢˜ï¼ˆæ”¯æŒçŠ¶æ€ã€ä¼˜å…ˆçº§ç­‰ï¼‰

#### ğŸ“ ç”¨æˆ·æ•…äº‹ç®¡ç† (2ä¸ª)
- `listUserStories` - åˆ—å‡ºé¡¹ç›®ç”¨æˆ·æ•…äº‹
- `createUserStory` - åˆ›å»ºç”¨æˆ·æ•…äº‹

#### âœ… ä»»åŠ¡ç®¡ç† (1ä¸ª)
- `createTask` - åˆ›å»ºä»»åŠ¡ï¼ˆå…³è”ç”¨æˆ·æ•…äº‹ï¼‰

### æµ‹è¯•æ¶æ„
```
test/
â”œâ”€â”€ README.md           # æµ‹è¯•æ–‡æ¡£
â”œâ”€â”€ unitTest.js        # å•å…ƒæµ‹è¯•ï¼ˆ11ä¸ªæµ‹è¯•ï¼Œ100%é€šè¿‡ï¼‰
â”œâ”€â”€ quickTest.js       # å¿«é€ŸåŠŸèƒ½æµ‹è¯•ï¼ˆ4ä¸ªæµ‹è¯•ï¼‰
â”œâ”€â”€ mcpTest.js         # MCPåè®®æµ‹è¯•ï¼ˆ8ä¸ªæµ‹è¯•ï¼Œå¤æ‚ï¼‰
â”œâ”€â”€ integration.js     # Taiga APIé›†æˆæµ‹è¯•ï¼ˆéœ€å‡­æ®ï¼‰
â””â”€â”€ runTests.js        # ç»¼åˆæµ‹è¯•è¿è¡Œå™¨
```

## ğŸ”§ å¼€å‘æ³¨æ„äº‹é¡¹

### æ ¸å¿ƒè®¾è®¡åŸåˆ™
1. **æ¨¡å—åŒ–ä¼˜å…ˆ** - æ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹æ¨¡å—ï¼Œä¾¿äºç»´æŠ¤
2. **é”™è¯¯å¤„ç†ç»Ÿä¸€** - æ‰€æœ‰APIè°ƒç”¨ä½¿ç”¨ç»Ÿä¸€é”™è¯¯å¤„ç†æ¨¡å¼
3. **å“åº”æ ¼å¼æ ‡å‡†** - ä½¿ç”¨`createSuccessResponse`å’Œ`createErrorResponse`
4. **é¡¹ç›®æ ‡è¯†ç¬¦çµæ´»** - æ”¯æŒæ•°å­—IDå’Œå­—ç¬¦ä¸²slug

### ESæ¨¡å—è§„èŒƒ
- æ‰€æœ‰å¯¼å…¥å¿…é¡»åŒ…å«`.js`æ‰©å±•å
- ä½¿ç”¨`export`/`import`è¯­æ³•
- æ”¯æŒåŠ¨æ€å¯¼å…¥

### æ•°æ®å¤„ç†æ¨¡å¼
```javascript
// é¡¹ç›®è§£æç¤ºä¾‹
const project = await resolveProject(projectIdentifier);

// å“åº”æ ¼å¼åŒ–ç¤ºä¾‹  
return createSuccessResponse(`âœ… ${SUCCESS_MESSAGES.ISSUE_CREATED}`);

// é”™è¯¯å¤„ç†ç¤ºä¾‹
return createErrorResponse(ERROR_MESSAGES.PROJECT_NOT_FOUND);
```

### å¸¸ç”¨å·¥å…·å‡½æ•°
- `resolveProject()` - æ™ºèƒ½é¡¹ç›®è§£æï¼ˆID/slug/åç§°ï¼‰
- `formatDate()` - ç»Ÿä¸€æ—¥æœŸæ ¼å¼åŒ–
- `calculateCompletionPercentage()` - å®Œæˆåº¦è®¡ç®—
- `createSuccessResponse()` / `createErrorResponse()` - å“åº”æ ¼å¼åŒ–

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

### æ¨¡å—åŒ–ç¨‹åº¦
- **ä¸»æ–‡ä»¶ç¼©å‡**: 800+ è¡Œ â†’ 130 è¡Œ (83%å‡å°‘)
- **åŠŸèƒ½åˆ†ç¦»**: 6ä¸ªç‹¬ç«‹å·¥å…·æ¨¡å—
- **æµ‹è¯•è¦†ç›–**: 4ä¸ªæµ‹è¯•å±‚çº§
- **æ–‡æ¡£åŒ–**: å®Œæ•´APIå’Œæ¶æ„æ–‡æ¡£

### å¼€å‘å·¥ä½œæµ
1. **å¿«é€ŸéªŒè¯**: `npm test` (å•å…ƒ+å¿«é€Ÿæµ‹è¯•)
2. **åŠŸèƒ½å¼€å‘**: ä¿®æ”¹å¯¹åº”å·¥å…·æ¨¡å—
3. **å®Œæ•´æµ‹è¯•**: `npm run test:full`
4. **è‡ªåŠ¨å‘å¸ƒ**: `npm version patch && git push origin main --tags`

### CI/CDè‡ªåŠ¨åŒ–æµç¨‹ ğŸš€
é¡¹ç›®é…ç½®äº†å®Œæ•´çš„GitHub Actionsè‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹ï¼š

**è§¦å‘æ¡ä»¶**: æ¨é€ `v*` æ ‡ç­¾
```bash
npm version patch              # è‡ªåŠ¨åˆ›å»ºæ–°ç‰ˆæœ¬æ ‡ç­¾
git push origin main --tags    # æ¨é€è§¦å‘CI/CD
```

**è‡ªåŠ¨åŒ–æµç¨‹**:
1. **ğŸ§ª æµ‹è¯•é˜¶æ®µ** - è¿è¡Œå•å…ƒæµ‹è¯•å’Œå¿«é€Ÿæµ‹è¯•
2. **ğŸ“¦ å¹¶è¡Œå‘å¸ƒ**:
   - NPM Registry: `taiga-mcp-server`
   - GitHub Packages: `@greddy7574/taiga-mcp-server`
3. **ğŸ‰ Releaseåˆ›å»º** - è‡ªåŠ¨ç”Ÿæˆchangelogå’Œå‘å¸ƒè¯´æ˜

**é…ç½®è¦æ±‚**:
- GitHub Repository Secret: `NPM_TOKEN` (npmè‡ªåŠ¨åŒ–token)
- æƒé™: `contents: write`, `packages: write`

**å®Œæ•´æµç¨‹è€—æ—¶**: ~45ç§’ (æµ‹è¯•â†’å‘å¸ƒâ†’Release)

## ğŸ¯ å¸¸è§å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°å·¥å…·
1. åœ¨`src/tools/`åˆ›å»ºå·¥å…·æ–‡ä»¶
2. åœ¨`src/tools/index.js`æ³¨å†Œå·¥å…·
3. åœ¨`src/constants.js`æ·»åŠ ç›¸å…³å¸¸é‡
4. æ·»åŠ å¯¹åº”æµ‹è¯•ç”¨ä¾‹

### ä¿®æ”¹APIå“åº”
1. æ£€æŸ¥`src/taigaService.js`ä¸­çš„APIè°ƒç”¨
2. ä½¿ç”¨`src/utils.js`ä¸­çš„æ ¼å¼åŒ–å‡½æ•°
3. ç¡®ä¿é”™è¯¯å¤„ç†ä¸€è‡´æ€§

### è°ƒè¯•é—®é¢˜
1. è¿è¡Œ`npm run test:unit`éªŒè¯æ ¸å¿ƒé€»è¾‘
2. è¿è¡Œ`npm run test:quick`éªŒè¯MCPåŠŸèƒ½
3. æ£€æŸ¥`.env`æ–‡ä»¶é…ç½®
4. æŸ¥çœ‹`test/README.md`äº†è§£æµ‹è¯•ç­–ç•¥

## ğŸš€ é¡¹ç›®å‘å±•å†ç¨‹

### ç‰ˆæœ¬å†å²
- **v1.0.0**: åŸºç¡€MCPåŠŸèƒ½
- **v1.3.0**: æ·»åŠ constantså’Œutilsæ¨¡å—
- **v1.4.0**: å¢å¼ºå¸¸é‡ç®¡ç†ï¼Œç»Ÿä¸€å‘½å
- **v1.5.0**: å®Œå…¨æ¨¡å—åŒ–æ¶æ„
- **v1.5.1**: æ¸…ç†å’Œæµ‹è¯•æ¡†æ¶
- **v1.5.2**: æ¸…ç†gitå†å²ï¼Œå®Œæ•´npmå‘å¸ƒ
- **v1.5.3**: CI/CDåŸºç¡€æ¡†æ¶
- **v1.5.4**: ä¿®å¤CI/CDæµç¨‹
- **v1.5.5**: åŒé‡å‘å¸ƒæ”¯æŒ(NPM+GPR)
- **v1.5.6**: å®Œå…¨è‡ªåŠ¨åŒ–Releaseåˆ›å»º

### AIåä½œå¼€å‘ç‰¹è‰²
è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†äººæœºåä½œå¼€å‘çš„å¼ºå¤§æ½œåŠ›ï¼š
- **æ¶æ„è®¾è®¡**: AIè¾…åŠ©çš„æ¨¡å—åŒ–è®¾è®¡
- **ä»£ç é‡æ„**: ä»å•æ–‡ä»¶åˆ°æ¨¡å—åŒ–çš„å®Œæ•´é‡æ„
- **æµ‹è¯•æ¡†æ¶**: å¤šå±‚æ¬¡æµ‹è¯•ç­–ç•¥è®¾è®¡
- **æ–‡æ¡£å®Œå–„**: ä¸“ä¸šçº§æ–‡æ¡£å’ŒæŒ‡å—

é¡¹ç›®æ˜¯"inspired by"å¼€æºé¡¹ç›®çš„æˆåŠŸæ¡ˆä¾‹ï¼Œå±•ç°äº†å¦‚ä½•åœ¨ä¿æŒæ³•å¾‹åˆè§„çš„åŒæ—¶è¿›è¡Œå¤§å¹…åˆ›æ–°å’Œæ”¹è¿›ã€‚

## ğŸ“š æ‰©å±•æ–‡æ¡£

**å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£å’Œç”¨æˆ·æŒ‡å—è¯·è®¿é—®é¡¹ç›® Wiki:**
ğŸ‘‰ **https://github.com/greddy7574/taigaMcpServer/wiki**

### Wiki äº®ç‚¹åŠŸèƒ½
- ğŸ” **å…¨æ–‡æœç´¢** - å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šå†…å®¹
- ğŸ“± **ç§»åŠ¨ä¼˜åŒ–** - æ›´å¥½çš„ç§»åŠ¨è®¾å¤‡ä½“éªŒ  
- ğŸ”— **æ™ºèƒ½å¯¼èˆª** - é¡µé¢é—´å¿«é€Ÿè·³è½¬
- ğŸ“– **åœ¨çº¿ç¼–è¾‘** - åä½œç¼–è¾‘æ–‡æ¡£
- ğŸ“Š **å¯Œåª’ä½“æ”¯æŒ** - å›¾è¡¨ã€è¡¨æ ¼ã€ä»£ç é«˜äº®

### æ¨èé˜…è¯»é¡ºåº
1. [Installation Guide](https://github.com/greddy7574/taigaMcpServer/wiki/Installation-Guide) - æ–°ç”¨æˆ·å¿…è¯»
2. [API Reference](https://github.com/greddy7574/taigaMcpServer/wiki/API-Reference) - å®Œæ•´APIæ–‡æ¡£
3. [CICD Automation](https://github.com/greddy7574/taigaMcpServer/wiki/CICD-Automation) - è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹